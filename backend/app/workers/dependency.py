from contextlib import contextmanager
from typing import Generator
from sqlalchemy.orm import Session

@contextmanager
def contextual_get_db(session: Session) -> Generator[Session, None, None]:
  db = session()
  try:
    yield db
  finally:
    db.close()
"""Create StatusScanJob table

Revision ID: a4cddfd5b5eb
Revises: 4e30661f98f0
Create Date: 2024-05-22 00:32:35.484368

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = 'a4cddfd5b5eb'
down_revision: Union[str, None] = '4e30661f98f0'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('status_scan_jobs',
    sa.Column('id', sa.UUID(), nullable=False),
    sa.Column('db_get_job_task', sa.Enum('not_started', 'in_progress', 'success', 'failure', name='task_statuses'), nullable=False),
    sa.Column('gitlab_get_related_files_task', sa.Enum('not_started', 'in_progress', 'success', 'failure', name='task_statuses'), nullable=False),
    sa.Column('scan_run_task', sa.Enum('not_started', 'in_progress', 'success', 'failure', name='task_statuses'), nullable=False),
    sa.Column('db_create_and_save_task', sa.Enum('not_started', 'in_progress', 'success', 'failure', name='task_statuses'), nullable=False),
    sa.Column('gitlab_trigger_job_task', sa.Enum('not_started', 'in_progress', 'success', 'failure', name='task_statuses'), nullable=False),
    sa.Column('overall_status', sa.Enum('not_started', 'in_progress', 'success', 'failure', name='task_statuses'), nullable=False),
    sa.Column('job_id', sa.Integer(), nullable=True),
    sa.Column('remarks', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['job_id'], ['jobs.id'], name=op.f('fk_status_scan_jobs_job_id_jobs')),
    sa.PrimaryKeyConstraint('id', name=op.f('pk_status_scan_jobs'))
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('status_scan_jobs')
    op.execute("DROP TYPE IF EXISTS task_statuses CASCADE")
    # ### end Alembic commands ###

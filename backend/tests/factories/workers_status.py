from factory import (
  SubFactory,
  lazy_attribute
)
from factory.alchemy import SQLAlchemyModelFactory

from app.database.models import workers_status as models

from tests.factories.detection import JobFactory

class StatusScanJobFactory(SQLAlchemyModelFactory):
  class Meta:
    model = models.StatusScanJob
    sqlalchemy_session_persistence = "commit"
  
  job = SubFactory(JobFactory)

  @lazy_attribute
  def job_id(self):
    return self.job.id
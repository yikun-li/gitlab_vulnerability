import { BadgeCheck, BadgeHelp } from "lucide-react"

import {
  Alert,
  AlertDescription,
  AlertTitle,
} from "@/components/ui/alert"
import { Separator } from "@/components/ui/separator"

import { IRemediation } from "@/types/report/security-report"

interface RemediationsAlertProps {
  remediations?: IRemediation[]
}

const RemediationsAlert = ({
  remediations
}: RemediationsAlertProps) => {

  const renderNoRemediationAlert = () => (
    <Alert>
      <BadgeHelp className="h-4 w-4" />
      <AlertTitle className="mb-0">
        No remediation was produced for this vulnerability
      </AlertTitle>
    </Alert>
  )

  if (remediations !== undefined) {
    return (
      remediations.map((remediation, index) => (
        <Alert key={index}>
          <BadgeCheck className="h-4 w-4" />
          <AlertTitle>Remediation #{index + 1}</AlertTitle>
          <AlertDescription className="mt-3 leading-loose space-y-2">
            <div>{remediation.summary}</div>
            <Separator />
            <div>{remediation.diff}</div>
          </AlertDescription>
        </Alert>
      ))
    )
  }
  return renderNoRemediationAlert()
}

export { RemediationsAlert }

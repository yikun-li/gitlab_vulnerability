"use client"

import { usePaginatedStatusScanJobs } from "@/hooks/use-paginated-status-scan-jobs"
import { DataTable } from "./data-table"
import { useStatusScanJobsTable } from "@/hooks/use-status-scan-jobs-table"
import { paginatedStatusScanJobsColumns } from "./data-table-columns"
import { ColumnDef } from "@tanstack/react-table"

const StatusScanJobsDataTable = () => {
  const {
    data,
    isError,
    isLoading,
    pagination,
    setPagination,
    columnFilters,
    setColumnFilters,
  } = usePaginatedStatusScanJobs()
  const { table } = useStatusScanJobsTable({
    data: data?.items,
    columns: paginatedStatusScanJobsColumns as ColumnDef<unknown>[],
    pageCount: data?.pages,
    isLoading,
    state: {
      columnFilters,
      pagination,
    },
    setPagination,
    setColumnFilters,
  })

  return (
    <DataTable 
      table={table}
      isError={isError}
      isLoading={isLoading}
    />
  )
}

export { StatusScanJobsDataTable }

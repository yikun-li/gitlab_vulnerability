"use client"

import { notFound, permanentRedirect } from "next/navigation"

import { PageTitle } from "@/components/shared/animations/page-header"
import { useStatusScanJob } from "@/hooks/use-status-scan-job"

const GlJobRedirectPage = ({ params }: { params: { id: string } }) => {
  const { statusScanJob, isError, error, isLoading } = useStatusScanJob({ glJobId: params.id })

  if (isError) return (
    notFound()
  )

  if (!isLoading && statusScanJob !== undefined) {
    permanentRedirect(`/job/${statusScanJob.job_id}`)
  }

  return (
    <div className="space-y-4">
      <PageTitle 
        title={`Job ${statusScanJob?.job_id}`}
        loadingTitle="Job"
        isLoading={isLoading}
      />
    </div>
  )
}

export default GlJobRedirectPage 
